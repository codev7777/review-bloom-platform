(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[514],{40402:function(e,t,r){"use strict";r.d(t,{u_:function(){return v},r6:function(){return f},Lt:function(){return d.y}});var n=r(82729),a=r(85893),o=r(15483),i=r(31420),l=r(67814),s=r(93967),c=r.n(s),u=r(26793),d=r(13017),m=r(85950),h=r.n(m);let f=e=>{let{className:t,children:r,ruled:n}=e;return(0,a.jsx)("h4",{className:c()("mb-2 font-bold text-lg text-center md:text-left mt-5 md:mt-0 text-grey-black",n&&"border-b pb-4 border-grey-mid",t),children:r})};function p(){let e=(0,n._)(["language.close"]);return p=function(){return e},e}let v=e=>{let{children:t,className:r,transition:n=d.y.Zoom,large:s=!1,overlayClassName:m,...f}=e,{t:v}=(0,u.$)();return(0,a.jsx)(d.B,{...f,transition:n,className:c()(m,"md:p-10"),children:(0,a.jsxs)("div",{className:c()(h().modal,s&&h().large,"bg-white p-4 md:px-10 md:py-8 md:rounded-md overflow-auto shadow-md size-full md:size-auto box-border",r),"data-testid":"popup",children:[(0,a.jsx)(o.TRl,{variant:"dark",className:"mx-auto md:hidden"}),(0,a.jsx)("button",{className:"absolute text-2xl text-grey-mid right-5 top-3 md:right-10 md:top-8 hover:text-navy transition-colors",title:v(p()),onClick:f.onHide,children:(0,a.jsx)(l.G,{className:"fill-current",icon:i.NB})}),t]})})}},80029:function(e,t,r){"use strict";r.d(t,{LX:function(){return l},qV:function(){return s},yV:function(){return a}});var n,a,o=r(51624),i=r.n(o);let l=300;(n=a||(a={})).Zoom="zoom",n.Fade="fade",n.SlideDown="slide-down",n.Flyout="flyout",n.MobileReverseFlyout="mobile-reverse-flyout";let s={fade:{base:"transition-opacity",entering:"opacity-0",entered:"opacity-100",exiting:"opacity-0",exited:"opacity-0"},zoom:{base:i().zoom,entering:"scale-105 opacity-0",entered:"scale-100 opacity-1",exiting:"scale-105 opacity-0"},"slide-down":{base:"transition-transform",entering:i()["slide-top-out"],entered:"translate-y-0",exiting:i()["slide-top-out"]},flyout:{base:"absolute top-0 transition-transform right-0 transform",entering:"translate-x-full",entered:"translate-x-0",exiting:"translate-x-full"},"mobile-reverse-flyout":{base:"fixed top-0 transform transition-transform left-0 2xl:right-0 2xl:left-auto",entering:"-translate-x-full 2xl:translate-x-full",entered:"translate-x-0",exiting:"-translate-x-full 2xl:translate-x-full"}}},13017:function(e,t,r){"use strict";r.d(t,{B:function(){return m},y:function(){return c.yV}});var n=r(85893),a=r(93967),o=r.n(a),i=r(67294),l=r(26273),s=r(66791),c=r(80029),u=r(80703);let d=(e,t)=>o()("duration-".concat(c.LX),t.base,t[e]),m=e=>{let{show:t,onHide:r,children:a,transition:m=c.yV.Fade,alwaysRendered:h=!1,className:f,...p}=e,v=(0,i.useRef)(null),g=a.props,y=e=>r(e),w=c.qV[c.yV.Fade],x=c.qV[m];(0,s.Z)("keydown",e=>{t&&"Escape"===e.key&&y(e)});let b=()=>{t&&v.current&&v.current.focus()},C=(0,n.jsx)(l.ZP,{in:t,timeout:{appear:c.LX,exit:c.LX},onEntered:()=>{setTimeout(b,c.LX)},unmountOnExit:!h,children:e=>{let t=d(e,w),r=d(e,x);return(0,n.jsxs)("div",{...p,className:o()("fixed top-0 left-0 flex flex-col items-center size-full box-border z-50","exited"===e&&"pointer-events-none hidden",f),children:[(0,n.jsx)("button",{ref:v,className:o()("fixed left-0 top-0 size-full bg-black bg-opacity-50",t),onClick:y}),(0,i.cloneElement)(a,{...g,className:o()(g.className,r)})]})}});return h?C:(0,n.jsx)(u.X,{children:C})}},38828:function(e,t,r){"use strict";r.d(t,{hE:function(){return j}});var n,a,o=r(82729),i=r(85893),l=r(45429),s=r(15483),c=r(83109),u=r(93967),d=r.n(u),m=r(11163),h=r(67294),f=r(10708),p=r(87536),v=r(26793),g=r(70270),y=r(65688),w=r(9241),x=r(60697),b=r(40402);function C(){let e=(0,o._)(["enterprise-search.download-confirmation-prompt.client-name"]);return C=function(){return e},e}let E=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((e,t,r)=>(e.push({key:r,value:t.id,text:t.name,option:r}),e),[])};(n=a||(a={}))[n.NotMandatory=0]="NotMandatory",n[n.Max=1]="Max",n[n.ISBN=2]="ISBN",n[n.FinanceCode=3]="FinanceCode",n[n.Digits=4]="Digits",n[n.MandatoryWithEmail=5]="MandatoryWithEmail",n[n.Date=6]="Date",n[n.Required=7]="Required";let I={7:{value:!0,message:"enterprise-search.download-confirmation-prompt.fill-out-field"},2:{value:/^(?=(?:\D*\d){10}(?:(?:\D*\d){3})?$)[\d-]+$/,message:"enterprise-search.download-confirmation-prompt.not-valid"},3:{value:/^([a-zA-Z0-9]{1}\/([a-zA-Z0-9]){4}\/([a-zA-Z0-9]){6}\.([a-zA-Z0-9]){4})$/i,message:"enterprise-search.download-confirmation-prompt.not-valid"},4:{value:/^\d{13}$/i,message:"enterprise-search.download-confirmation-prompt.not-valid"},6:{value:/^(0[1-9]|[12][0-9]|3[01])[/](0[1-9]|1[012])[/](19|20)\d\d$/i,message:"enterprise-search.download-confirmation-prompt.not-valid"}},N=e=>{switch(e){case 1:return{maxLength:128,required:I[7]};case 2:return{maxLength:13,pattern:I[2],required:I[7]};case 3:return{pattern:I[3],required:I[7]};case 4:return{pattern:I[4],required:I[7]};case 6:return{pattern:I[6],required:I[7]};default:return{}}},P=(e,t,r)=>{let{t:n}=(0,v.$)();return e.map(e=>{var a,o;let l=(null===(a=r[e.name])||void 0===a?void 0:a.message)?n((null===(o=r[e.name])||void 0===o?void 0:o.message)||""):"";return(0,i.jsx)("div",{className:"mt-5",children:(0,i.jsx)(x.U,{required:!!N(e.validation).required,label:e.description,errorMessage:l,maxLength:N(e.validation).maxLength,...t(e.name,N(e.validation))})},e.name)})},j=e=>{var t,r;let{show:n,onHide:a,userDetails:o,downloadHandler:u,defaultProjectRef:I,isAdditionalDetails:N=!1,product:j}=e,{t:k}=(0,v.$)(),S=(0,m.useRouter)(),T=(null==S?void 0:S.pathname)==="/shopping-cart",[R]=(0,f.Z)([g.Xc]),L=!(null==o?void 0:o.bespokeDetails.length)||(null==o?void 0:o.isAdGroup),D=null==o?void 0:o.bespokeDetails.reduce((e,t)=>({...e,[t.name]:""}),{}),A=L?{reference:I,adClientId:R[g.Xc],...D}:{...D},{register:q,handleSubmit:_,reset:M,formState:U,control:O}=(0,p.cI)({defaultValues:A,shouldFocusError:!1}),F=_(e=>u(e)),{errors:V}=U,[Z,B]=(0,h.useState)(!1),H=(null==j?void 0:j.type)===c.ProductType.Video;h.useEffect(()=>{n&&M(A)},[n]);let W=(0,h.useMemo)(()=>(null==j?void 0:j.restriction)||(null==j?void 0:j.isNews),[j]),z=(0,h.useMemo)(()=>L&&N,[L,N]);return(0,i.jsxs)(b.u_,{alwaysRendered:!0,show:n,onHide:a,overlayClassName:"h-full",className:d()("overflow-hidden flex flex-col max-h-full",{"md:!w-fit":W&&z}),children:[(0,i.jsx)(b.r6,{children:k("enterprise-search.download-confirmation-prompt.title")}),(0,i.jsxs)("div",{className:d()("flex flex-col gap-3 max-h-full overflow-hidden",{"md:flex-row":W&&z}),children:[W&&(0,i.jsx)("div",{className:d()("flex-1 max-h-fit overflow-hidden",{"md:!max-h-[340px] md:w-[350px]":z&&W}),id:"consent-box",children:(0,i.jsx)(l.a7,{data:(0,l.er)(k,T?l.H5.CartProductPopupConsent:H?l.H5.VideoPopupConsent:l.H5.ImagePopupConsent,!0),boxActive:Z,handleChange:e=>{B(void 0===e?!Z:e)},className:"!pr-2 overflow-hidden h-full",contentWrapper:"pr-2 overflow-auto h-full [&::-webkit-scrollbar-thumb]:bg-gray-700 [&::-webkit-scrollbar-track]:bg-gray-200  [&::-webkit-scrollbar]:w-1.5 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-track]:rounded-full"})}),(0,i.jsxs)("div",{className:d()("max-h-fit pr-2 overflow-auto h-full [&::-webkit-scrollbar-thumb]:bg-gray-700 [&::-webkit-scrollbar-track]:bg-gray-200  [&::-webkit-scrollbar]:w-1.5 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-track]:rounded-full",{"md:w-[350px]":z&&W}),children:[(null==o?void 0:o.isAdGroup)?(0,i.jsx)("div",{className:"mt-5",children:(0,i.jsx)(p.Qr,{name:"adClientId",control:O,rules:{required:{value:!0,message:k("enterprise-search.download-confirmation-prompt.enter-client-name")}},render:e=>{var t;return(0,i.jsx)(w.F,{required:!0,options:E(null==o?void 0:o.adUsers),value:e.field.value,onBlur:e.field.onBlur,onChange:e.field.onChange,errorMessage:null===(t=V.adClientId)||void 0===t?void 0:t.message,label:k(C())})}})}):P((null==o?void 0:o.bespokeDetails)||[],q,V),z&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"text-base mt-5 md:mt-0",children:k("enterprise-search.download-confirmation-prompt.subtitle")}),(0,i.jsx)("div",{className:"mt-5",id:"more-details",children:(0,i.jsx)(x.U,{required:!0,label:k("enterprise-search.download-confirmation-prompt.placeholder-reference"),errorMessage:null===(t=V.reference)||void 0===t?void 0:t.message,...q("reference",{required:{value:!0,message:k("enterprise-search.download-confirmation-prompt.enter-reference")}}),defaultValue:I,"data-testid":"download_preference"})}),(0,i.jsx)("div",{className:"mt-5",children:(0,i.jsx)(x.U,{isMultiline:!0,label:k("enterprise-search.download-confirmation-prompt.placeholder-comments"),errorMessage:null===(r=V.comment)||void 0===r?void 0:r.message,...q("comment",{}),"data-testid":"comments"})})]}),(0,i.jsxs)("div",{className:"flex mt-5 max-h-fit",children:[(0,i.jsx)(s.Yd2,{disabled:!!(((null==j?void 0:j.restriction)||(null==j?void 0:j.isNews))&&!Z),primary:!0,size:s.qE.Large,"data-testid":"download-image-button",onClick:e=>{if(Z&&(0,y.L9)({action:y.aU.EnableChkBoxDownloadConfirmationPopup,event:y.ju.Click,label:y.D_.DownloadConfirmationPopupCheckboxEnable,category:H?y.WD.VideoPageInteractions:y.WD.ImagePageInteractions}),N){F(e),Z&&(0,y.L9)({event:y.ju.Click,action:y.aU.DownloadRestrictionBanner,category:y.WD.ShoppingCartInteractions,label:y.D_.EnableChkboxRestrictionConsent});return}u({},j)},className:"flex items-center justify-center w-full mr-8 font-bold 3xs:text-base",children:k("enterprise-search.download-confirmation-prompt.download")}),(0,i.jsx)(s.Yd2,{onClick:a,size:s.qE.Large,className:"flex items-center justify-center w-full font-bold 3xs:text-base",children:k("enterprise-search.download-confirmation-prompt.cancel")})]})]})]})]})}},66558:function(e,t,r){"use strict";r.d(t,{e:function(){return d},h:function(){return m}});var n=r(85893),a=r(15483),o=r(87536),i=r(26793),l=r(65688),s=r(9001),c=r(60697),u=r(40402);let d="password",m=e=>{var t;let{show:r,onHide:m,onSubmit:h}=e,{t:f}=(0,i.$)(),{register:p,handleSubmit:v,formState:g,setError:y}=(0,o.cI)({shouldFocusError:!1}),{errors:w}=g;return(0,n.jsxs)(u.u_,{alwaysRendered:!0,show:r,onHide:m,children:[(0,n.jsx)(u.r6,{ruled:!0,children:f("enterprise-search.password-confirmation-prompt.title")}),(0,n.jsx)("div",{children:(0,n.jsx)("div",{className:"mt-5",children:(0,n.jsx)(c.U,{required:!0,type:"password",label:f("enterprise-search.password-confirmation-prompt.placeholder-password"),"data-testid":"password-input",errorMessage:null===(t=w.password)||void 0===t?void 0:t.message,...p(d,{required:{value:!0,message:f("enterprise-search.password-confirmation-prompt.incorrect-password")}})})})}),(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)("a",{href:"/forgot-password/",target:"_blank",className:"mr-5 text-sm border-0 md:inline-block highlighted-link",children:f("enterprise-search.password-confirmation-prompt.forgot-password")})}),(0,n.jsx)("div",{className:"flex mt-5",children:(0,n.jsx)(a.Yd2,{primary:!0,size:a.qE.Large,onClick:v(e=>{h(e,y),(0,l.L9)({event:s.ju.Click,action:s.aU.CTACLick,category:s.WD.ShoppingCartInteractions,label:s.qB.PasswordConfirmation})}),"data-testid":"confirm-password-button",className:"flex items-center justify-center w-1/2 mr-8 font-bold 3xs:text-base",children:f("enterprise-search.password-confirmation-prompt.continue")})})]})}},84115:function(e,t,r){"use strict";r.d(t,{Bv:function(){return d},Ey:function(){return v},LT:function(){return c},M3:function(){return s},S7:function(){return p},Td:function(){return f},Z8:function(){return h},hH:function(){return l},nr:function(){return g},ob:function(){return i},uP:function(){return y}});var n=r(8020),a=r(65688);r(35974);var o=r(20847);let i=(e,t)=>{(0,a.L9)({event:a.ju.Click,action:e,category:a.WD.SearchBar,label:e===a.aU.ReverseImageIconClick?"":t})},l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/-/g," ")},s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return l(e).toLowerCase()},c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.trim().replace(/[\s_]+/g,"-")},u=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(null==t?void 0:null===(e=t.charAt(0))||void 0===e?void 0:e.toUpperCase())+(null==t?void 0:t.slice(1))},d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return u(s(e))},m=e=>e?"".concat(encodeURIComponent(c(e)),".html"):"",h=e=>encodeURIComponent(c(e)),f=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en";return"".concat((0,n.q)(n.A.KeywordVideoSearch,t)).concat(m(e))},p=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en";return"".concat((0,n.q)(n.A.KeywordSearch,t)).concat(m(e))},v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e&&e.includes(t)?e.replace("".concat(t," "),"".concat(t,"+")):e},g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t?"".concat(e).concat(encodeURIComponent((0,o.tF)(t)),".html"):e},y=(e,t,r,a,o)=>{let i=r?encodeURIComponent(c(r)):"",l=r?"".concat(i,".html"):"";if(e===n.A.SearchNews)return"".concat(t,"?qt=").concat(r);let s=0===o?"?qt=".concat(i):"?imgt=".concat(o,"&qt=").concat(i);return["noveluse","bespoke","editorial"].some(e=>t.includes(e))?"".concat(t).concat(l).concat(s):"".concat(t).concat(l).concat(a?"?".concat(a):"")}},20847:function(e,t,r){"use strict";r.d(t,{Uz:function(){return C},Vp:function(){return w},q3:function(){return b},tF:function(){return y},x6:function(){return x}});var n=r(82729),a=r(85893),o=r(99381),i=r(67814),l=r(26793),s=r(8020),c=r(30788),u=r(4082),d=r(65688),m=r(18518),h=r(8653);function f(){let e=(0,n._)(["search-tags.search-video-by-tags"]);return f=function(){return e},e}function p(){let e=(0,n._)(["search-tags.search-by-tags"]);return p=function(){return e},e}function v(){let e=(0,n._)(["search-tags.show-fewer"]);return v=function(){return e},e}function g(){let e=(0,n._)(["search-tags.show-all"]);return g=function(){return e},e}let y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/[ ./\\]+/g,"-").replace(/^-|-$/,"")},w=e=>{let{keyword:t,searchUrl:r,onClick:n,noFollow:l}=e;return(0,a.jsxs)("a",{className:"flex items-center max-w-full px-4 py-2 mb-3 mr-3 text-sm border rounded border-grey-border bg-grey-light hover:border-black min-h-10",href:r,onClick:n,rel:l?"nofollow":void 0,children:[(0,a.jsx)(i.G,{className:"mr-2 text-xs",icon:o.wn}),(0,a.jsx)("span",{className:"max-w-xs overflow-hidden text-ellipsis",children:String(t)})]})},x=e=>{let{keyword:t,searchUrl:r,showLink:n}=e;return n?(0,a.jsxs)("a",{className:"flex items-center max-w-full px-4 py-2 mb-3 mr-3 text-sm border rounded border-grey-border focus:bg-grey-light hover:bg-grey-light",href:r,children:[(0,a.jsx)(i.G,{className:"mr-2 text-xs",icon:o.wn}),(0,a.jsx)("span",{className:"max-w-xs overflow-hidden text-ellipsis",children:String(t)})]}):(0,a.jsxs)("div",{className:"flex items-center max-w-full px-4 py-2 mb-3 mr-3 text-sm border rounded border-grey-border focus:bg-grey-light hover:bg-grey-light",children:[(0,a.jsx)(i.G,{className:"mr-2 text-xs",icon:o.wn}),(0,a.jsx)("span",{className:"max-w-xs overflow-hidden text-ellipsis",children:String(t)})]})},b=e=>{let{keywords:t,disableLinkForBot:r=!1,video:n=!1}=e,{t:o}=(0,l.$)(),{containerRef:i,hasOverflow:b,isExpanded:C,toggleExpanded:E}=(0,c.E)(),I=(0,u.b)(),N=(0,s.q)(n?s.A.KeywordVideoSearch:s.A.KeywordSearch,I),P=n&&"de"===I;return t.length?(0,a.jsxs)("div",{className:"text-grey-black",children:[(0,a.jsx)(h.M,{text:o(n?f():p()),collapseRuler:!0,children:b&&(0,a.jsx)(h.A,{role:"button",onClick:E,children:o(C?v():g())})}),(0,a.jsx)("div",{className:C?void 0:"overflow-hidden max-h-24",ref:i,children:(0,a.jsx)("div",{className:"overflow-hidden",children:(0,a.jsx)("div",{className:"flex flex-wrap -mb-3",children:t.map(e=>{let t="string"==typeof e?e:e.key,o="string"==typeof e?e:e.label,i="string"==typeof e?"".concat(N).concat(y(e),".html"):e.href;return r?(0,a.jsx)(x,{keyword:o,showLink:"en"===I,searchUrl:i},t):(0,a.jsx)(w,{searchUrl:i,keyword:o,onClick:()=>(0,m.Gq)(d.aU.KeywordClick,t,n),noFollow:P},t)})})})})]}):null},C=e=>(0,a.jsx)(b,{video:!0,...e})},8653:function(e,t,r){"use strict";r.d(t,{A:function(){return l},M:function(){return i}});var n=r(85893),a=r(93967),o=r.n(a);let i=e=>{let{text:t,children:r,collapseRuler:a=!1,hideLine:i=!1,useCustomHeading:l=!1}=e;return(0,n.jsxs)("div",{className:o()("flex justify-start mb-4 text-black md:flex-row md:items-center",r?"flex-wrap items-center":"items-center"),children:[l?(0,n.jsx)("div",{className:"mr-5 text-lg",children:t}):(0,n.jsx)("h2",{className:"mr-5 text-lg",children:t}),r,!i&&(0,n.jsx)("hr",{className:o()("flex grow border-t border-grey-border",a?"hidden md:block":"")})]})},l=e=>{let{className:t,...r}=e;return(0,n.jsx)("a",{"data-testid":"search-header-link",className:o()("mr-5 text-sm border-0 md:inline-block text-blue hover:underline font-noto",t),...r})}},93839:function(e,t,r){"use strict";r.d(t,{Zl:function(){return v},oZ:function(){return p},wu:function(){return a}});var n,a,o=r(85893),i=r(45429),l=r(11163),s=r(67294),c=r(10708),u=r(38828),d=r(66558),m=r(70270),h=r(41181),f=r(37087);(n=a||(a={})).AddToCart="add-to-cart",n.BuyNow="buy-now";let p=(0,s.createContext)({cart:{count:0},setCart:()=>{},cartActiveAction:null,whileAddingToCart:()=>Promise.resolve(),whileBuyingNow:()=>Promise.resolve(),downloadHandler:()=>Promise.resolve(),setSelctedProduct:()=>{},setUser:()=>{}}),v=e=>{let{cart:t,children:r}=e,n=(0,l.useRouter)(),{products:a}=(0,s.useContext)(i.oZ),[v,g]=(0,s.useState)(t),[y,w]=(0,f.$)(),[x,b]=(0,f.$)(),[C,E]=(0,s.useState)({}),[I,N]=(0,s.useState)({}),[P,j]=(0,s.useState)(!1),[k,S]=(0,s.useState)(!1),T={isAdGroup:!!(null==I?void 0:I.isAdGroup),adUsers:(null==I?void 0:I.adUsers)||[],bespokeDetails:(null==I?void 0:I.bespokeDetails)||[]},[R]=(0,c.Z)(),{verifySession:L,downloadImageSubmitHandler:D,passwordConfirmationSubmitHandler:A,createBDOHandler:q}=(0,h.q)(C,S,j,!!(null==I?void 0:I.additionalDetails),I,a),_=(null==n?void 0:n.pathname)==="/shopping-cart",M=async()=>{await L((null==I?void 0:I.additionalDetails)?void 0:C)};return(0,s.useEffect)(()=>{g(t)},[t]),(0,o.jsxs)(p.Provider,{value:{cart:v,setCart:g,cartActiveAction:y&&"add-to-cart"||x&&"buy-now"||null,whileAddingToCart:w,whileBuyingNow:b,downloadHandler:M,setSelctedProduct:E,setUser:N},children:[r,(0,o.jsx)(u.hE,{userDetails:T,product:C,show:P,onHide:()=>j(!1),downloadHandler:_?q:D,defaultProjectRef:R[m.WM],isAdditionalDetails:!!(null==I?void 0:I.additionalDetails)}),(0,o.jsx)(d.h,{show:k,onHide:()=>S(!1),onSubmit:A})]})}},78429:function(e,t,r){"use strict";r.d(t,{Y:function(){return i}});var n=r(83109),a=r(67294);let o={layoutData:{currency:n.CurrencyCode.GBP,countryCode:null,contactNumber:"",imageCount:0,isDefaultData:!0}},i=(0,a.createContext)(o)},49782:function(e,t,r){"use strict";r.d(t,{ET:function(){return i},tP:function(){return o}});var n=r(85893),a=r(67294);let o=(0,a.createContext)({lightboxes:[],setLightboxes:()=>{}}),i=e=>{let{lightboxes:t,children:r}=e,[i,l]=(0,a.useState)(t);return(0,a.useEffect)(()=>{l(t)},[t]),(0,n.jsx)(o.Provider,{value:{lightboxes:i,setLightboxes:l},children:r})}},41181:function(e,t,r){"use strict";r.d(t,{q:function(){return T}});var n=r(45429),a=r(83109),o=r(11163),i=r(80129),l=r(67294),s=r(10708),c=r(26793),u=r(66558),d=r(55406),m=r(70270),h=r(8020),f=r(13633),p=r(9001),v=r(18518),g=r(68882),y=r(55419),w=r(35974),x=r(2841),b=r(74561),C=r(61802),E=r(29914),I=r(6309),N=r(23080),P=r(4082),j=r(12433);let k=()=>(0,l.useContext)(j.N).session,S=e=>Object.keys(e).reduce((t,r)=>t?"".concat(t,"^^").concat(r,"||").concat(e[r]):"".concat(r,"||").concat(e[r]),""),T=function(e,t,r){var j,T;let R=arguments.length>3&&void 0!==arguments[3]&&arguments[3],L=arguments.length>4?arguments[4]:void 0,D=arguments.length>5?arguments[5]:void 0,A=(0,C.h)(),q=(0,P.b)(),{countryCode:_}=(0,N.Q)(),[M,U]=(0,s.Z)(),{t:O}=(0,c.$)(),F=(0,o.useRouter)(),V=k(),Z=(0,I.ev)(),B=(0,E.D)(),[H,W]=(0,l.useState)({}),z=(null==F?void 0:F.pathname)==="/shopping-cart",G=(null===(j=M[w.d0])||void 0===j?void 0:j.toUpperCase())||(null==L?void 0:null===(T=L.territoryId)||void 0===T?void 0:T.toUpperCase())||_,Q=e=>{let t=(0,x.PM)();e.forEach(e=>{U(e.name,e.value,{path:e.path,secure:e.secure,domain:t})})},$=async e=>{let{commercetoolsConfig:t}=(0,d.b)(),r=await (0,n.pM)(t,M.ctToken),a=(null==r?void 0:r.lineItems.map(e=>{var t,r;return{Id:e.id,ProductId:null===(r=e.custom)||void 0===r?void 0:null===(t=r.fields)||void 0===t?void 0:t.alamy_assetId,ProductType:(0,b.Wv)(e)?p.C0.Video:p.C0.Image}}))||[],o={OrderId:(null==r?void 0:r.id)||"",LangCode:q,CountryCode:G||"",Items:a,PurchaseOrderRef:(null==e?void 0:e.reference)||"",Comments:(null==e?void 0:e.comment)||""};(null==e?void 0:e.adClientId)&&U(m.Xc,e.adClientId),(null==e?void 0:e.reference)&&U(m.WM,e.reference),(await (0,f.VC)(A)(o)).success&&r&&(await (0,n.Gs)(r),window.location.href=(0,h.q)(h.A.DownloadedImages,q),(0,v.Tj)(D))},Y=async(t,n,o)=>{var l,s,c,u,d,h,p;let b;let C=R?e:n,E={isBot:B,locale:q,seqOrRef:(null==C?void 0:null===(l=C.altids)||void 0===l?void 0:l.seq)||""},{data:I}=await (0,f.wv)(A)(E,!1);if((null==C?void 0:C.type)===a.ProductType.Video){let e={videoId:null!==(c=null==C?void 0:null===(s=C.altids)||void 0===s?void 0:s.id)&&void 0!==c?c:"",projectReference:t.reference,comments:t.comment};b=await (0,f.AI)(A)(e)}else{let e=(0,i.parse)(M[w.mh]||""),r=w.wC.map(t=>t===w.n2?(0,x.SS)(e[w.eI],e[w.Qy]):e[t]||""),n={imageId:(null==C?void 0:null===(u=C.altids)||void 0===u?void 0:u.id)||"",imageRef:(null==C?void 0:null===(d=C.altids)||void 0===d?void 0:d.ref)||"",isVector:(null==C?void 0:null===(h=C.meta)||void 0===h?void 0:h.picturetype)===a.PictureType.Vector,isLibraryDownload:"LIBRARY"===C.apaLib,langCode:q,countryCode:G,imageBin:(null==I?void 0:I.renditions)?(0,y.Z2)(I.renditions):0,isNews:(null==C?void 0:C.isNews)||!1,userComments:t.comment||"",projectRef:t.reference||"",iqExtraDetailDesc:!t.reference&&S(t)||"",authOcd:M.AuthOCD||(null==o?void 0:o.value)||(null==H?void 0:H.value),pageNo:"".concat((0,x.rg)(F)),searchNo:V.id||"",isIntranet:Z,licenseType:null==C?void 0:null===(p=C.meta)||void 0===p?void 0:p.licencetype,adClientId:t.adClientId||"",searchId:r.join("")};t.adClientId&&U(m.Xc,t.adClientId),t.reference&&U(m.WM,t.reference),b=await (0,f.GN)(A)(n)}b.availableForDownload&&((0,g.E)(b.downloadUrl),r(!1),(0,v.ZA)(e),W({}))},X=async e=>{let n={userId:null==L?void 0:L.id,authOcd:M.AuthOCD||null,downloadType:"image",isIntranet:Z};if(!M.AuthOCD){t(!0);return}if((await (0,f.uT)(A)(n)).showPasswordPrompt)t(!0);else{if(R||(null==e?void 0:e.restriction)||(null==e?void 0:e.isNews)){r(!0);return}z?await $():await Y({},e,{value:M.AuthOCD})}};return{passwordConfirmationSubmitHandler:async(n,a)=>{let o={userId:(null==L?void 0:L.id)||"",cid:null,password:n[u.e],downloadType:"image"};try{let n=await (0,f.ZY)(A)(o);if(n.cookies){if(t(!1),Q(n.cookies),R||(null==e?void 0:e.restriction)||(null==e?void 0:e.isNews)){r(!0),W(n.cookies.find(e=>"AuthOCD"===e.name));return}z?await $():await Y({},e,n.cookies.find(e=>"AuthOCD"===e.name))}}catch(e){a(u.e,{type:"value",message:O("enterprise-search.password-confirmation-prompt.incorrect-password")})}},downloadImageSubmitHandler:Y,verifySession:X,createBDOHandler:$}}},30788:function(e,t,r){"use strict";r.d(t,{E:function(){return i}});var n=r(67294),a=r(66791);let o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,[t,r]=(0,n.useState)(null),o=(0,n.useRef)(null),i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;o.current&&r(e?o.current.scrollHeight>e:o.current.scrollHeight>o.current.offsetHeight)};return(0,n.useEffect)(()=>i(e),[]),(0,a.Z)("resize",()=>i(e)),{containerRef:o,hasOverflow:t,update:i}},i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=o(e),{hasOverflow:r}=t,[a,i]=(0,n.useState)(null);return(0,n.useEffect)(()=>{"boolean"==typeof r&&i(!r)},[r]),{...t,isExpanded:a,toggleExpanded:e=>{e.preventDefault(),i(!a)},setIsExpanded:i}}},23080:function(e,t,r){"use strict";r.d(t,{Q:function(){return o}});var n=r(67294),a=r(78429);let o=()=>(0,n.useContext)(a.Y).layoutData},16321:function(e,t,r){"use strict";r.d(t,{e:function(){return p}});var n=r(82729),a=r(85893),o=r(67294),i=r(26793),l=r(49782),s=r(19473);let c=(e,t)=>t<3?"...":e.length>t?"".concat(e.slice(0,t-3).trim()).concat("..."):e;var u=r(61802),d=r(12421),m=r(62852);function h(){let e=(0,n._)(["lightbox.view-lightbox"]);return h=function(){return e},e}let f=e=>{let{lightbox:t}=e,{t:r}=(0,i.$)();return(0,a.jsxs)("div",{className:"flex flex-col items-start",children:[c(r("lightbox.save-success-toast",{lightboxName:t.name}),31),(0,a.jsx)("a",{href:"".concat((0,d.W)(d.A.LightboxDetails),"?lbId=").concat(t.id),className:"highlighted-link",children:r(h())})]})},p=()=>{let{showToast:e}=(0,m.e)(),{lightboxes:t,setLightboxes:r}=(0,o.useContext)(l.tP),n=(0,u.h)(),i=t=>{e((0,a.jsx)(f,{lightbox:t}),{style:m.j.Success})},c=async()=>r(await (0,s.RK)(n)());return{currentLightbox:t.find(e=>e.isCurrent),lightboxes:t,updateLightboxes:c,addToLightbox:async(e,t)=>(i(await (0,s.S7)(n)(e,t)),c()),createNewLightboxWithProduct:async(e,t)=>(i(await (0,s.Rg)(n)(e,t)),c())}}},37087:function(e,t,r){"use strict";r.d(t,{$:function(){return o}});var n=r(67294),a=r(87636);let o=()=>{let[e,t]=(0,n.useState)(!1),r=async r=>{if(!e){t(!0);try{await r()}catch(e){(0,a.S3)(e),t(!1)}t(!1)}};return[e,r]}},13990:function(e,t,r){"use strict";r.d(t,{f:function(){return d}});var n=r(67294),a=r(10708),o=r(50408),i=r(40058),l=r(3685),s=r(4082),c=r(35804),u=r(15798);let d=e=>{let t=(0,u.a)(),r=(0,s.b)(),{countryName:d}=(0,c.m)(),{isPPMEnabled:m}=(0,n.useContext)(o.T),[h]=(0,a.Z)([l.B$,l.iZ]);return("true"===h.isPPMEnabled||m)&&!d&&(0,i.Z)(r,t,e,h)}},62852:function(e,t,r){"use strict";r.d(t,{e:function(){return o},j:function(){return a.jf}});var n=r(67294),a=r(44647);let o=()=>(0,n.useContext)(a.rZ)},25763:function(e,t,r){"use strict";r.d(t,{Xq:function(){return o},_R:function(){return i},dv:function(){return a}});var n=r(87636);let a=e=>async()=>{try{return(await e.get("cart")).data}catch(e){throw Error(e.message)}},o=e=>async t=>{try{await e.post("cart",t)}catch(e){(0,n.S3)(e)}},i=e=>async t=>{try{return(await e.post("cart/checkout",t)).data}catch(e){throw Error(e.message)}}},59706:function(e,t,r){"use strict";r.d(t,{SU:function(){return o},Tg:function(){return i},U_:function(){return l}});var n=r(83109),a=r(87636);let o=e=>async function(t,r){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],o=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;try{return(await e.get("licences/".concat(t,"?lan=").concat(r,"&isSimplifiedPricingFeatureEnabled=").concat(o,"&isVideo=").concat(i),{...n?{}:{validateStatus:null}})).data}catch(e){return(0,a.S3)(e),{rf:null,standard:[],pack:null}}},i=e=>async function(t,r,o,i){let l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:n.CurrencyCode.GBP,u=arguments.length>7?arguments[7]:void 0,d=!(arguments.length>8)||void 0===arguments[8]||arguments[8];try{return(await e.get("ct-licences?query=".concat(t,"&renditions=").concat(r,"&locale=").concat(o,"&cacheKey=").concat(i,"&licenseType=").concat(s,"&ebm=").concat(l,"&currency=").concat(c,"&collectionId=").concat(u),{...d?{}:{validateStatus:null}})).data}catch(e){return(0,a.S3)(e),{rf:null,standard:[],pack:null}}},l=e=>async t=>{try{return(await e.post("purchase",t)).data}catch(e){throw Error(e.message)}}},19473:function(e,t,r){"use strict";r.d(t,{RK:function(){return n},Rg:function(){return o},S7:function(){return a}});let n=e=>async()=>{try{return(await e.get("lightboxes")).data.items}catch(e){throw Error(e.message)}},a=e=>async(t,r)=>{try{return(await e.post("lightboxes/".concat(t.id),{seq:r.altids.seq,productType:r.type})).data}catch(e){throw Error(e.message)}},o=e=>async(t,r)=>{try{return(await e.post("lightboxes",{name:t,seq:r.altids.seq,productType:r.type})).data}catch(e){throw Error(e.message)}}},13633:function(e,t,r){"use strict";r.d(t,{AI:function(){return F},GN:function(){return U},Lm:function(){return A},PN:function(){return V},SE:function(){return b},SF:function(){return C},Tm:function(){return N},V7:function(){return R},VC:function(){return O},ZY:function(){return M},bE:function(){return q},dy:function(){return D},ew:function(){return E},fR:function(){return x},kq:function(){return Z},n6:function(){return S},pc:function(){return k},s3:function(){return P},tN:function(){return L},uM:function(){return T},uT:function(){return _},uX:function(){return j},wv:function(){return w}});var n=r(83109),a=r(56647),o=r(36235),i=r(79485),l=r(79555),s=r(84115),c=r(55406),u=r(53316),d=r(82294),m=r(87636),h=r(98173),f=r(35974),p=r(37669),v=r(2841);let g=(e,t)=>{let{locale:r,isBot:n,type:a,geo:i,page:c,pn:d,ps:m,nasty:h,editorial:p,lightbox:g,rmuid:y,translate:w,sessionid:x,offset:b,hidecontributor:C}=t,E=o.Yz.reduce((t,r)=>{let n=e[r],a=r===f.A6&&Array.isArray(n)&&n.map(e=>"USA"===e?"us":e.toLowerCase()).join(","),o="ethnicity"===r&&Array.isArray(n)&&n.join(",");return Array.isArray(n)?{...t,[r]:a||o||n.join(",")}:t},e),I=Number(null==E?void 0:E.imgt)===u.lJ.Social,N=Number(null==E?void 0:E.imgt)===u.lJ.AllImages;return{...E,[f.D2]:g?void 0:E[f.D2],qt:(0,v.ZG)(E.qt),hc:(0,s.Ey)(E.hc,"5"),frrate:(0,s.Ey)(E.frrate,"50"),res:(0,s.Ey)(E.res,"4k"),durend:(null==E?void 0:E.durend)>=l.AW?l.t:null==E?void 0:E.durend,imgt:I||N?void 0:E.imgt,langcode:r,isbot:n,type:a,geo:i,pn:d||c,ps:m,page:void 0,nasty:h,editorial:p,lightbox:g,rmuid:y,translate:w,sessionid:x,offset:b,ispartial:!0,hidecontributor:(null==C?void 0:C.join(","))||void 0,...I?{social:!0}:{}}},y=e=>{let{locale:t,isBot:r,ps:n,pn:a,productType:o,isProductUI:i}=e;return{lan:t,bot:r,ps:n,pn:a,type:o,isProductUI:i}},w=e=>function(t){let r=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return e.get("products/".concat(t.seqOrRef),{params:y({...t,isProductUI:!0}),...r?{}:{validateStatus:null}})},x=e=>async t=>{try{return(await e.post("products/aggregate",t)).data}catch(e){throw Error(e.message)}},b=e=>function(t){let r=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return e.get("products/".concat(t.seqOrRef),{params:y({...t,productType:n.ProductType.Video,isProductUI:!0}),...r?{}:{validateStatus:null}})},C=e=>async function(t,r){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=y({...t,ps:(null==t?void 0:t.ps)||13,pn:(null==t?void 0:t.pn)||1}),l=i.type||n.ProductType.Picture,s=l===n.ProductType.Picture&&(null==r?void 0:r.imgt)?{imgt:null==r?void 0:r.imgt}:{},{geo:c,headline:u,user:d,isSSR:f}=r||{};try{let a=(await e.get("search/".concat(t.seqOrRef,"/similar/"),{timeout:o?100:0,params:{...i,geo:c||"GB",headline:u||"",type:l,langcode:i.lan,audienceType:null==d?void 0:d.audienceType,silo:null==d?void 0:d.silo,hidePA:null==d?void 0:d.hidePA,hideDataco:null==d?void 0:d.hideDataco,customScheme:null==d?void 0:d.customScheme,...s,isSSR:!!f,isbot:i.bot,isUserLoggedOut:null==r?void 0:r.isUserLoggedOut}})).data;return{similarProducts:l===n.ProductType.Picture?(0,p.px)(null==a?void 0:a.items,i.lan,!0):(0,p.Bh)(null==a?void 0:a.items),totalMatches:(null==a?void 0:a.totalMatches)||0}}catch(r){let e=r.response;return o&&r.code===h.SM.RequestTimeout?(0,m.S3)(new h.bW(t.seqOrRef),!1):e&&e.status===a.W.TOO_MANY_REQUESTS?(0,m.S3)(new h.uu(t.seqOrRef),!1):(0,m.S3)(r),null}},E=e=>async(t,r)=>{try{return(await e.get("products/".concat(t.seqOrRef,"/same-contributor/"),{params:{...y(t),qt:r}})).data}catch(e){throw Error(e.message)}},I=e=>async(t,r)=>{try{return(await e.get("lightboxes/".concat(t),{params:r})).data}catch(e){throw Error(e.message)}},N=e=>async(t,r)=>{try{let n=(await Promise.allSettled(t.map(t=>I(e)("".concat(t.lightboxId),{...r,ps:t.numberOfImages})))).map(e=>"rejected"===e.status?null:e.value).filter(e=>null!==e);if(!n.length)throw Error("No lightboxes were found");return n}catch(e){throw Error(e.message)}},P=e=>async(t,r)=>{let{locale:n,isBot:a,type:o}=r;try{return(await e.get("products",{params:{...t,lan:n,bot:a,type:o}})).data.items}catch(e){throw Error(e.message)}},j=e=>async(t,r)=>{try{return(await e.get("search",{params:g(t,r)})).data}catch(e){throw Error(e.message)}},k=e=>async t=>{try{return(await Promise.all(t.map(t=>e.get("search",{params:g(t.queryParams,t.searchParams)})))).map((e,r)=>({searchQuery:t[r].searchQuery,response:e.data}))}catch(e){throw Error(e.message)}},S=e=>async(t,r)=>{try{return(await e.get("search/images-library-count",{params:g(t,r)})).data}catch(e){throw Error(e.message)}},T=e=>async function(t,r){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{return(await e.get("search/suggest",{params:{qt:t,lan:r,related:n}})).data}catch(e){throw Error(e.message)}},R=e=>async(t,r)=>{let n={imageId:t.imageid||"",altRef:r,pageNumber:Number(t.pn),pseudonymId:t.p||"",searchQuery:t.srch,searchId:t.searchId};try{await e.post("rankmeasures",{...n})}catch(e){(0,m.S3)(e)}},L=e=>async(t,r,n)=>{try{let a=await Promise.resolve(j(e)({...r,[f.D2]:t},n));return{collectionType:t,items:(0,p.px)(a.items,n.locale),totalMatches:a.totalMatches}}catch(e){throw Error(e.message)}},D=e=>async(t,r,n)=>{try{let a=await Promise.resolve(j(e)({...r,[f.D2]:t},n));return{collectionType:t,item:(0,p.px)(a.items,n.locale)[0],totalMatches:a.totalMatches}}catch(e){throw Error(e.message)}},A=e=>async(t,r)=>{try{let[n,a,o,l]=await Promise.all([i.yl.Ultimate,i.yl.Vital,i.yl.Uncut,i.yl.Foundation].map(n=>j(e)({...t,[f.D2]:n},r)));return[{collectionType:i.yl.Ultimate,items:(0,p.px)(n.items,r.locale),totalMatches:n.totalMatches},{collectionType:i.yl.Vital,items:(0,p.px)(a.items,r.locale),totalMatches:a.totalMatches},{collectionType:i.yl.Uncut,items:(0,p.px)(o.items,r.locale),totalMatches:o.totalMatches},{collectionType:i.yl.Foundation,items:(0,p.px)(l.items,r.locale),totalMatches:l.totalMatches}]}catch(e){throw Error(e.message)}},q=e=>async(t,r)=>(await e.get("search/agencies",{params:g(t,r)})).data,_=e=>async t=>{try{return(await e.post("showPrompt",t)).data}catch(e){throw Error(e.message)}},M=e=>async t=>{try{return(await e.post("verifyUserPassword",t)).data}catch(e){throw Error(e.message)}},U=e=>async t=>{try{return(await e.post("downloadProcessing",t)).data}catch(e){throw Error(e.message)}},O=e=>async t=>{try{return(await e.post("downloadProcessing/createBulkDownloadOrder",t)).data}catch(e){throw Error(e.message)}},F=e=>async t=>{try{try{return(await e.get("downloadProcessingVideo",{params:t})).data}catch(e){throw Error(e.message)}}catch(e){throw Error(e.message)}},V=async(e,t)=>{let r=[];for(let i=0;i<e.length;i+=t){let l=e.slice(i,i+t);try{var n,a,o;let e=await fetch("".concat(null===(n=(0,c.b)())||void 0===n?void 0:n.bulkApiUrl,"/products/v1/?ids=").concat(l.join(","),"&langcode=en"));if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let t=await e.json();null==t||null===(o=t.data)||void 0===o||null===(a=o.items)||void 0===a||a.map(e=>r.push({assetType:"image",assetId:e.ImageId,assetRef:e.ImageRef,assetSeq:e.ImageSeq,licenseType:e.LicenseType,isEditorialOnly:e.IsEditorialOnly,geoRestrictions:e.GeoRestrictions||[],assetStatus:e.ImageStatus}))}catch(e){console.error("Error processing chunk starting at index ".concat(i,":"),e)}}return r},Z=async(e,t)=>{let r=[];for(let n=0;n<e.length;n+=t){let a=e.slice(n,n+t);try{await Promise.all(a.map(e=>fetch("".concat((0,c.b)().apiUrl,"/products/").concat(e,"/?type=video")).then(e=>{if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));return e.json()}).then(e=>{var t,n,a,o,i,l,s;r.push({assetType:e.type,assetSubType:e.renditions&&(0,d.MR)(Object.keys(e.renditions)),assetId:null===(t=e.altids)||void 0===t?void 0:t.id,assetRef:null===(n=e.altids)||void 0===n?void 0:n.ref,assetSeq:null===(a=e.altids)||void 0===a?void 0:a.seq,licenseType:null===(o=e.meta)||void 0===o?void 0:o.licencetype,isEditorialOnly:null===(l=e.meta)||void 0===l?void 0:null===(i=l.restrictions)||void 0===i?void 0:i.restrictedForEditorialUse,assetStatus:null===(s=e.meta)||void 0===s?void 0:s.mediastatus,geoRestrictions:[]})})))}catch(e){console.error("Error processing video chunk starting at index ".concat(n,":"),e)}}return r}},11237:function(e,t,r){"use strict";var n,a;r.d(t,{M:function(){return n}}),(a=n||(n={})).MAIN="main",a.DOWNLOAD="download",a.BUY_NOW="buyNow"},34051:function(e,t,r){"use strict";var n,a,o,i;r.d(t,{C:function(){return n},q:function(){return a}}),(o=n||(n={})).APPLY_LICENSE="APPLY_LICENSE",o.RESTRICT_LIFT_REQUEST="RESTRICT_LIFT_REQUEST",o.DUPLICATE="DUPLICATE",o.APPROVE="APPROVE",o.DELETE="DELETE",o.HELP="HELP",o.DEFAULT="DEFAULT",(i=a||(a={})).ADD_LINE_ITEM="addLineItem",i.REMOVE_LINE_ITEM="removeLineItem",i.RESTRICT_LIFT_REQUEST="alamy_restrictionsLiftRequest",i.HELP="alamy_cartCustomerNotification",i.DUPLICATE="alamy_duplicateRequest"},82294:function(e,t,r){"use strict";r.d(t,{GQ:function(){return f},MR:function(){return p},Tx:function(){return d},dv:function(){return u},js:function(){return y},rc:function(){return v},yY:function(){return g}});var n=r(45429),a=r(65885),o=r(55406),i=r(11237),l=r(34051),s=r(39208),c=r(3685);let u=async(e,t)=>{let r=await (0,s.dL)();return(await r.post("cart/".concat(e),{},{headers:{Cookie:"AlamyUserID=".concat(t)}})).data||[]},d=async e=>{let{selections:t=[],productId:r,variantId:u,addedAt:d=Date.now(),isPremium:m=!1,version:h,type:f,comment:p,duplicateCount:v=1}=e;try{let e=await (0,s.dL)(),g=[];if((f===l.C.APPLY_LICENSE||f===l.C.DELETE)&&g.push(...t.map(e=>{let{lineItemId:t}=e;return{action:l.q.REMOVE_LINE_ITEM,lineItemId:t}})),f===l.C.APPLY_LICENSE){let{commercetoolsConfig:e}=(0,o.b)(),i=m&&e?await (0,n.cS)(e):void 0;g.push(...t.map(e=>{var t,o;let{alamy_assetId:s,alamy_assetSeq:m,alamy_assetRef:h,assetType:f}=e;return{action:l.q.ADD_LINE_ITEM,...(0,n.$C)({productId:r,variantId:u,assetId:s,assetSeq:m,assetRef:h,addedAt:d,channelId:null==i?void 0:i.id,assetType:f,channelKeyWithAsset:(t=new a.Z(document.cookie),null!==(o=void 0===t?void 0:t.get(c.YA))&&void 0!==o)?o:null})}}))}(f===l.C.RESTRICT_LIFT_REQUEST||f===l.C.HELP)&&g.push({action:"".concat(f===l.C.HELP?l.q.HELP:l.q.RESTRICT_LIFT_REQUEST),assets:t.map(e=>{let{alamy_assetRef:t}=e;return t}),comments:p}),f===l.C.DUPLICATE&&g.push({action:l.q.DUPLICATE,lineItems:t.map(e=>{let{lineItemId:t}=e;return{id:t,count:v}})});let y=await e.post("cart/".concat(i.M.DOWNLOAD),{version:h,actions:g});return(null==y?void 0:y.data)||[]}catch(e){return e.message}},[m,h]=["hd","4k"],f=e=>{let t=null==e?void 0:e.every(e=>{var t;return null===(t=e.assetSubType)||void 0===t?void 0:t.some(e=>e.toLowerCase().includes(h))}),r=null==e?void 0:e.every(e=>{var t;return null===(t=e.assetSubType)||void 0===t?void 0:t.some(e=>e.toLowerCase().includes(m)&&!e.toLowerCase().includes(h))});return t&&r?[m,h]:r?[m]:t?[h]:[]},p=e=>{let t=[];return e.forEach(e=>{e.toLowerCase().includes(m)&&!e.toLowerCase().includes(h)?t.push(m.toUpperCase()):e.toLowerCase().includes(h)&&t.push(h.toUpperCase())}),t},v=e=>{var t,r,n,a;let o=null!==(t=null==e?void 0:e.every(e=>{let{licenseType:t}=e;return"RM"===t}))&&void 0!==t&&t,i=null!==(r=null==e?void 0:e.every(e=>{let{licenseType:t}=e;return"RF"===t}))&&void 0!==r&&r,l=null!==(n=null==e?void 0:e.some(e=>{let{licenseType:t}=e;return"RM"===t}))&&void 0!==n&&n&&null!==(a=null==e?void 0:e.some(e=>{let{licenseType:t}=e;return"RF"===t}))&&void 0!==a&&a;return{hide:i||l,disable:o||l}},g=e=>{let t=new Set,r=new Set;return null==e||e.forEach(e=>{var n,a;let{custom:o}=e;return(r.has(null==o?void 0:null===(n=o.fields)||void 0===n?void 0:n.alamy_assetRef)?t:r).add(null==o?void 0:null===(a=o.fields)||void 0===a?void 0:a.alamy_assetRef)}),Array.from(t)},y=(e,t)=>{let r=[],n=[];return e.forEach(e=>{(null==t?void 0:t.some(t=>t.assetId===e.alamy_assetId&&(71===t.assetStatus||t.geoRestricted)))?r.push(e):n.push(e)}),{isRestricted:r.length>0,restrictedItems:r,unRestrictedItems:n}}},68882:function(e,t,r){"use strict";r.d(t,{E:function(){return n}});let n=(e,t)=>{let r=document.createElement("a");r.href=e,r.type="hidden",r.download=t||e.split("/").pop()||"",document.body.appendChild(r),r.click(),document.body.removeChild(r)}},71395:function(e,t,r){"use strict";r.d(t,{um:function(){return b},aD:function(){return E},x2:function(){return C}});var n=r(45429),a=r(83109),o=r(25501),i=r(55406),l=r(58656),s=r(89685),c=r(91817),u=r(25763),d=r(59706),m=r(19473),h=r(70680),f=r(39208),p=r(12449),v=r(40058),g=r(82165),y=r(35353);let w=e=>{let{addContext:t,getInitialProps:r,getFinalProps:n}=e;return e=>{let a=async a=>{let o=await t(a),i={...a,...o},l=await r(i);if("redirect"in l||"notFound"in l)return l;let s=l.props,c=await e({...i,initialProps:s});if("redirect"in c||"notFound"in c)return c;let u=await n({...i,initialProps:s});return"redirect"in u||"notFound"in u?u:{props:{...l.props,...c.props,...u.props}}};return a.inner=e,a}},x=(e,t)=>Promise.resolve({props:{pageData:{layoutData:{currency:a.CurrencyCode.GBP,countryCode:null,contactNumber:"",imageCount:0,isDefaultData:!0},authInfo:e,lightboxes:[],cart:{count:0},licences:null,cookieDomain:t}}}),b=async(e,t,r,a,o,l,c,f)=>{var p;let g=(0,v.Z)(a,t.user,s.y.PageData,c),[y,w,x,b,C]=await Promise.all([(0,h.r)(e)(),r?(0,m.RK)(e)():[],r&&!g?(0,u.dv)(e)():{count:0},r&&(null==t?void 0:null===(p=t.user)||void 0===p?void 0:p.isIQUser)&&!g?(0,d.SU)(e)(1,a):null,r&&!f&&l&&g?(0,n.pM)((0,i.b)().commercetoolsConfig,l):null]);return{props:{pageData:{layoutData:y,authInfo:t,lightboxes:w,cart:x,licences:b,cookieDomain:o,ppmInitialCart:C||null}}}},C=w({addContext:async e=>{let{req:t,res:r,locale:n}=e,a=new o.Z(t.headers.cookie),i=(0,g.QR)(t.headers.host||""),s=await (0,f.yx)(a,t),u=await (0,f.yx)(a,t,!0),d=(null==t?void 0:t.headers["x-distributor-territory"])?l.a:n||l.a,m=t.headers["user-agent"]||"",h=(0,y.CA)(m),v=!!(0,p.b)(a),w=await (0,c.yr)(s)(a,r,d,i,h),{referer:x}=t.headers,b=null==a?void 0:a.get("ctToken");return{cookies:a,api:s,locale:d,isBot:h,authInfo:w,isAuthenticatedRequest:v,cookieDomain:i,referer:x,ctToken:b,apiSearch:u}},getInitialProps:e=>{let{authInfo:t,cookieDomain:r}=e;return x(t,r)},getFinalProps:e=>{let{cookies:t}=e;return Promise.resolve({props:{cookie:(0,g.SQ)(t)}})}}),E=w({addContext:async e=>{let{req:t,res:r,locale:n}=e,a=new o.Z(t.headers.cookie),i=(0,g.QR)(t.headers.host||""),s=await (0,f.yx)(a,t),u=await (0,f.yx)(a,t,!0),d=n||l.a,m=t.headers["user-agent"]||"",h=(0,y.CA)(m),v=(0,p.b)(a),w=await (0,c.yr)(s)(a,r,d,i,h),{referer:x}=t.headers,b=null==a?void 0:a.get("ctToken");return{cookies:a,api:s,locale:d,isBot:h,authInfo:w,isAuthenticatedRequest:!!v,cookieDomain:i,referer:x,ctToken:b,apiSearch:u}},getInitialProps:e=>{let{api:t,authInfo:r,isAuthenticatedRequest:n,locale:a,cookieDomain:o,ctToken:i,cookies:l}=e;return b(t,r,n,a,o,i,l)},getFinalProps:e=>{let{cookies:t}=e;return Promise.resolve({props:{cookie:(0,g.SQ)(t)}})}})},85950:function(e){e.exports={modal:"Modal_modal__JNobJ",large:"Modal_large__NOtL4"}},51624:function(e){e.exports={zoom:"OverlayComponent_zoom__KclRJ","slide-top-out":"OverlayComponent_slide-top-out__uJm4t"}}}]);